
# Anomaly Detection and Public Transport Adjustments (A.D.P.T.A)

## Overview

This project focuses on dynamically detecting anomalies such as heavy rainfall to optimize public transport routes. By leveraging real-time data, the system avoids stops affected by floods, recalculates routes, and ensures safe and efficient transport solutions.

**Important**: While some components use real-world data (e.g., bus stop locations and routes), rainfall data is simulated due to limited access to live datasets. The system is designed to easily integrate real-world data.

## Features

- **Dynamic Route Optimization**: Recalculates bus routes to avoid stops at risk of flooding.
- **Interactive Visualizations**: Compares original and optimized routes on an interactive map.
- **Customizable Thresholds**: Allows users to adjust rainfall thresholds for anomaly detection.
- **Real-Time Adaptability**: Can be connected to live rainfall and route data for deployment.

## Prerequisites

- Python 3.8+
- Required libraries:
  - `pandas`
  - `networkx`
  - `folium`

Install dependencies using:
```bash
pip install -r requirements.txt
```

## File Structure

```
ANOMALY_MODIFICATION_PROJECT/
├── data/                  # Input data files
│   ├── lluvias.csv        # Simulated rainfall intensity data
│   ├── paradas.csv        # H12 bus stop data with coordinates
│   └── rutas.csv          # H12 bus route data
├── outputs/               # Outputs generated by the code
│   ├── rutas_modificadas.csv # Updated bus routes
│   └── visualizacion_rutas.html # Interactive map of the routes
├── src/                   # Source code
│   ├── main.py            # Main script for recalculating routes
│   └── visualizacion.py   # Visualization script for maps
├── .gitignore             # Files to be ignored by Git
├── README.md              # Documentation file (this document)
├── requirements.txt       # Python dependencies
```

## Usage Instructions

### 1. Install Dependencies
Run the following command to install all necessary Python libraries:
```bash
pip install -r requirements.txt
```

### 2. Recalculate Routes
Execute the main script to recalculate bus routes based on simulated rainfall data:
```bash
python src/main.py
```
The recalculated routes will be saved in `outputs/rutas_modificadas.csv`.

### 3. Generate the Visualization
Run the visualization script to create an interactive map:
```bash
python src/visualizacion.py
```
The interactive map will be saved as `outputs/visualizacion_rutas.html`. Open it in your browser to view the results.

## Customization

- **Rainfall Threshold**: Adjust the threshold for heavy rainfall detection in `src/main.py`:
  ```python
  umbral_lluvia = 0.7  # Default threshold for heavy rainfall
  ```
- **Visualization Markers**: Customize the colors and icons for the map markers in `src/visualizacion.py`.

## Results

The system dynamically identifies bus stops affected by heavy rainfall and recalculates routes to avoid them. The interactive map visually compares the original and optimized routes, highlighting safe and efficient transport solutions.
