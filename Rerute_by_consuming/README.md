
# Bus Rerouting Based on Neighborhood Water Consumption (B.R.N.W.C)

## Overview

This project simulates the rerouting of bus routes in Barcelona based on water consumption data from different neighborhoods. By dynamically filtering neighborhoods with high water consumption, the system optimizes routes and generates interactive visualizations to compare original and modified bus paths.

**Important**: While the coordinates of bus stops are based on real locations, water consumption data is simulated. The system is designed to seamlessly integrate real-world consumption data in future implementations.

---

## Features

- **Dynamic Route Filtering**: Excludes neighborhoods with water consumption exceeding a dynamically calculated threshold.
- **Interactive Visualizations**: Generates maps showing original and modified routes using real street paths.
- **Threshold Automation**: Calculates the threshold as 150% of the average neighborhood consumption, making it adaptable to various datasets.
- **Customizable Scenarios**: Easily adjust inputs such as water consumption or bus stop locations for testing different configurations.

---

## Prerequisites

- **Python**: Version 3.9 or higher
- Required libraries:
  - `pandas`
  - `folium`
  - `osmnx`
  - `networkx`
  - `scikit-learn`

Install all dependencies using:
```bash
pip install -r requirements.txt


## File Structure

```
BUS_REROUTING_PROJECT/
├── data/                  # Input data files
│   ├── consumo_barrio.csv # Simulated water consumption per neighborhood
│   ├── paradas.csv        # Bus stop data with coordinates
│   └── rutas.csv          # Initial bus route definitions
├── outputs/               # Outputs generated by the code
│   ├── rutas_originales.csv          # Original bus routes (IDs)
│   ├── rutas_modificadas.csv         # Modified bus routes (IDs)
│   ├── rutas_originales_reales.html  # Interactive map of original routes
│   └── rutas_modificadas_reales.html # Interactive map of modified routes
├── src/                   # Source code
│   ├── main.py            # Main script for filtering routes
│   ├── visualizacion.py   # Visualization script for interactive maps
│   └── consumo.py         # Generates synthetic water consumption data
├── .gitignore             # Files to be ignored by Git
├── README.md              # Documentation file (this document)
├── requirements.txt       # Python dependencies
```

## Usage Instructions

### 1. Install Dependencies
Run the following command to install all necessary Python libraries:
```bash
pip install -r requirements.txt
```

### 2. Recalculate Routes
Run the main script to recalculate bus routes based on water consumption data
```bash
python src/main.py
```
The recalculated routes will be saved in `outputs/rutas_modificadas.csv`.

### 3. View Interactive Maps
After running the main.py script, open the interactive maps to visualize the results that would be automatically generated because of the automatic executation of
the visualization.py script:

Original Routes: `outputs/rutas_originales_reales.html`
Modified Routes: `outputs/rutas_modificadas_reales.html`

## Customization

The threshold for high water consumption is calculated as 150% of the average by default. To modify this behavior, adjust the following line in src/main.py:
  ```
  threshold = 1.5 * media_consumo  # Adjust multiplier as needed
  ```

## Add or Edit Neighborhood Data
Update the consumo_barrio.csv file to include or modify neighborhood water consumption data.

## Results

The system identifies neighborhoods with high water consumption and excludes their corresponding bus stops from the modified routes. Using real street paths and interactive maps, it visualizes both the original and modified routes, highlighting the optimization process.

    -Original Route: Includes all neighborhoods.
    -Modified Route: Excludes neighborhoods with water consumption exceeding the threshold.

## Future work

    - Real-Time Integration: Connect the system to live water consumption data for real-time route adjustments.
    - Performance Optimization: Enhance the pathfinding algorithm for larger datasets.
    - Extended Metrics: Include additional factors like traffic or weather data for more robust routing.


## Acknowledgments
This project uses:

OpenStreetMap for street data.
OSMnx for network and routing capabilities.
Folium for interactive map visualization.